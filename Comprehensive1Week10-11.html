<!DOCTYPE html>
<html lang="en">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <title>Comprehensive1Week 10-11</title>
Â  Â  <script src="https://cdn.tailwindcss.com"></script>
Â  Â  <style>
Â  Â  Â  Â  /* Custom styles to enhance Tailwind defaults and ensure responsiveness */
Â  Â  Â  Â  body {
Â  Â  Â  Â  Â  Â  font-family: 'Inter', sans-serif; /* Using Inter font */
Â  Â  Â  Â  Â  Â  background-color: #f8f8f8; /* Light background */
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  min-height: 100vh;
Â  Â  Â  Â  Â  Â  padding: 20px;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Styles for the modal backdrop */
Â  Â  Â  Â  .modal-backdrop {
Â  Â  Â  Â  Â  Â  position: fixed;
Â  Â  Â  Â  Â  Â  top: 0;
Â  Â  Â  Â  Â  Â  left: 0;
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  height: 100%;
Â  Â  Â  Â  Â  Â  background-color: rgba(0, 0, 0, 0.6); /* Semi-transparent dark overlay */
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  z-index: 1000; /* Ensure it's on top */
Â  Â  Â  Â  Â  Â  backdrop-filter: blur(5px); /* Add a blur effect */
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Styles for the modal content */
Â  Â  Â  Â  .modal-content {
Â  Â  Â  Â  Â  Â  background-color: white;
Â  Â  Â  Â  Â  Â  padding: 30px;
Â  Â  Â  Â  Â  Â  border-radius: 15px; /* Rounded corners for the modal */
Â  Â  Â  Â  Â  Â  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2); /* Soft shadow */
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  max-width: 500px;
Â  Â  Â  Â  Â  Â  width: 90%;
Â  Â  Â  Â  Â  Â  animation: fadeIn 0.3s ease-out; /* Simple fade-in animation */
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Fade-in animation for modal */
Â  Â  Â  Â  @keyframes fadeIn {
Â  Â  Â  Â  Â  Â  from { opacity: 0; transform: translateY(-20px); }
Â  Â  Â  Â  Â  Â  to { opacity: 1; transform: translateY(0); }
Â  Â  Â  Â  }
Â  Â  </style>
</head>
<body class="selection:bg-blue-200">
Â  Â  <div class="bg-white p-6 md:p-10 rounded-xl shadow-lg w-full max-w-4xl space-y-6">
Â  Â  Â  Â  <div class="text-center space-y-4">
Â  Â  Â  Â  Â  Â  <h1 id="dateHeading" class="text-3xl md:text-4xl font-extrabold text-gray-800"></h1>
Â  Â  Â  Â  Â  Â  <div id="timer" class="text-4xl font-bold text-blue-600">04:00</div>
Â  Â  Â  Â  Â  Â  <input type="text" id="studentName" placeholder="Enter your name"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â class="w-full md:w-1/2 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-center text-lg shadow-sm"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â aria-label="Student Name">
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="flex flex-col md:flex-row justify-between gap-6">
Â  Â  Â  Â  Â  Â  <div class="column flex-1 bg-yellow-50 p-4 rounded-lg shadow-md min-h-[300px] md:min-h-[500px] border border-yellow-200 overflow-auto" id="wordColumn">
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="column flex-1 bg-blue-50 p-4 rounded-lg shadow-md min-h-[300px] md:min-h-[500px] border border-blue-200 overflow-auto" id="definitionColumn">
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="flex flex-col md:flex-row justify-center gap-4 mt-6">
Â  Â  Â  Â  Â  Â  <button id="submitButton" onclick="submitQuiz()"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  class="px-8 py-4 bg-gray-300 text-gray-700 font-semibold rounded-lg shadow-md transition-all duration-300 ease-in-out
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â hover:bg-green-600 hover:text-white focus:outline-none focus:ring-4 focus:ring-green-300 text-lg cursor-not-allowed"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  disabled>
Â  Â  Â  Â  Â  Â  Â  Â  Submit Quiz
Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  <button id="resetButton" onclick="resetQuiz()"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  class="px-8 py-4 bg-red-400 text-white font-semibold rounded-lg shadow-md transition-all duration-300 ease-in-out
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â hover:bg-red-600 focus:outline-none focus:ring-4 focus:ring-red-300 text-lg">
Â  Â  Â  Â  Â  Â  Â  Â  Reset Quiz
Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div id="customModal" class="modal-backdrop hidden">
Â  Â  Â  Â  <div class="modal-content">
Â  Â  Â  Â  Â  Â  <h2 id="modalTitle" class="text-2xl font-bold mb-4 text-gray-800"></h2>
Â  Â  Â  Â  Â  Â  <div id="modalMessage" class="text-base text-gray-700 leading-relaxed mb-6 text-left"></div>Â 
Â  Â  Â  Â  Â  Â  <button onclick="closeModal()"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  class="px-6 py-3 bg-blue-500 text-white font-semibold rounded-lg shadow-md transition-all duration-300 ease-in-out
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â hover:bg-blue-600 focus:outline-none focus:ring-4 focus:ring-blue-300 text-lg">
Â  Â  Â  Â  Â  Â  Â  Â  Close
Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <script>
Â  Â  // Vocabulary data for the quiz
Â  Â  // !!! ä¿®å¤äº†æ•°ç»„ç»“æ„ï¼šç§»é™¤äº†å¤–éƒ¨çš„é¢å¤–æ•°ç»„å±‚çº§ !!!
Â  Â  const vocabulary = [
Â  { word: "trail", definition: "(n.) å°è·¯ï¼›è¸ªè¿¹" },
Â  { word: "broad", definition: "(adj.) å®½é˜”çš„ï¼›å¹¿æ³›çš„" },
Â  { word: "tight", definition: "(adj.) ç´§çš„ï¼›æ‹®æ®çš„" },
Â  { word: "permanent", definition: "(adj.) æ°¸ä¹…çš„ï¼›å›ºå®šçš„" },
Â  { word: "inform", definition: "(v.) é€šçŸ¥ï¼›å‘ŠçŸ¥" },
Â  { word: "estimate", definition: "(v.) ä¼°è®¡ï¼›ä¼°ç®—" },
Â  { word: "emerge", definition: "(v.) å‡ºç°ï¼›æµ®ç°" },
Â  { word: "evolve", definition: "(v.) è¿›åŒ–ï¼›å‘å±•" },
Â  { word: "maintain", definition: "(v.) ç»´æŒï¼›ä¿å…»" },
Â  { word: "thorough", definition: "(adj.) å½»åº•çš„ï¼›è¯¦å°½çš„" },
Â  { word: "convince", definition: "(v.) è¯´æœï¼›ä½¿ç¡®ä¿¡" },
Â  { word: "rare", definition: "(adj.) ç¨€æœ‰çš„ï¼›ç½•è§çš„" },
Â  { word: "fundamental", definition: "(adj.) åŸºæœ¬çš„ï¼›æ ¹æœ¬çš„" },
Â  { word: "usage", definition: "(n.) ç”¨æ³•ï¼›ä½¿ç”¨" },
Â  { word: "carve", definition: "(v.) é›•åˆ»ï¼›åˆ‡å¼€" },
Â  { word: "remind", definition: "(v.) æé†’ï¼›ä½¿æƒ³èµ·" },
Â  { word: "arrange", definition: "(v.) å®‰æ’ï¼›æ•´ç†" },
Â  { word: "familiar", definition: "(adj.) ç†Ÿæ‚‰çš„ï¼›å¸¸è§çš„" },
Â  { word: "confuse", definition: "(v.) ä½¿å›°æƒ‘ï¼›æ··æ·†" },
Â  { word: "controversial", definition: "(adj.) æœ‰äº‰è®®çš„ï¼›å¼•èµ·äº‰è®ºçš„" },
Â  { word: "tension", definition: "(n.) ç´§å¼ ï¼›å¼ åŠ›" },
Â  { word: "greet", definition: "(v.) é—®å€™ï¼›è¿æ¥" },
Â  { word: "substitute", definition: "(n.) æ›¿ä»£å“ï¼›æ›¿è¡¥" },
Â  { word: "bonus", definition: "(n.) å¥–é‡‘ï¼›é¢å¤–å¥½å¤„" },
Â  { word: "negotiate", definition: "(v.) è°ˆåˆ¤ï¼›åå•†" },
Â  { word: "military", definition: "(adj.) å†›äº‹çš„ï¼›å†›ç”¨çš„" },
Â  { word: "component", definition: "(n.) ç»„æˆéƒ¨åˆ†ï¼›é›¶ä»¶" },
Â  { word: "transfer", definition: "(v.) è½¬ç§»ï¼›è°ƒåŠ¨" },
Â  { word: "burst", definition: "(v.) çˆ†ç‚¸ï¼›çªç„¶å‘ç”Ÿ" },
Â  { word: "content", definition: "(adj.) æ»¡è¶³çš„ï¼›çŸ¥è¶³çš„" },
Â  { word: "trial", definition: "(n.) è¯•éªŒï¼›å®¡åˆ¤" },
Â  { word: "immigrant", definition: "(n.) ç§»æ°‘ï¼›ä¾¨æ°‘" },
Â  { word: "forecast", definition: "(v.) é¢„æµ‹ï¼›é¢„æŠ¥" },
Â  { word: "rub", definition: "(v.) æ‘©æ“¦ï¼›æ‰æ“" },
Â  { word: "vehicle", definition: "(n.) è½¦è¾†ï¼›å·¥å…·" },
Â  { word: "detect", definition: "(v.) å¯Ÿè§‰ï¼›æ£€æµ‹" },
Â  { word: "approval", definition: "(n.) æ‰¹å‡†ï¼›èµæˆ" },
Â  { word: "digest", definition: "(v.) æ¶ˆåŒ–ï¼›é¢†ä¼š" },
Â  { word: "violent", definition: "(adj.) æš´åŠ›çš„ï¼›å¼ºçƒˆçš„" },
Â  { word: "distinction", definition: "(n.) åŒºåˆ«ï¼›å“è¶Š" },
Â  { word: "pioneer", definition: "(n.) å…ˆé©±ï¼›æ‹“è’è€…" },
Â  { word: "bother", definition: "(v.) æ‰“æ‰°ï¼›è´¹å¿ƒ" },
Â  { word: "currently", definition: "(adv.) å½“å‰ï¼›ç›®å‰" },
Â  { word: "generate", definition: "(v.) äº§ç”Ÿï¼›ç”Ÿæˆ" },
Â  { word: "affection", definition: "(n.) å–œçˆ±ï¼›æ„Ÿæƒ…" },
Â  { word: "blame", definition: "(v.) è´£å¤‡ï¼›å½’å’äº" },
Â  { word: "figure", definition: "(n.) æ•°å­—ï¼›äººç‰©" },
Â  { word: "previous", definition: "(adj.) ä»¥å‰çš„ï¼›å…ˆå‰çš„" }
Â  ]; // ç¡®ä¿è¿™é‡Œæ˜¯ ']'

Â  Â  let selectedWord = null;Â 
Â  Â  let matchedPairs = new Map();Â 
Â  Â  let quizStartTime;Â 
Â  Â  let quizEndTime;Â 
Â  Â  let timerInterval;Â 
Â  Â  const totalWords = 15; // æ¯æ¬¡æµ‹éªŒçš„å•è¯é‡
Â  Â  const totalTime = 240; // æµ‹éªŒæ€»æ—¶é—´ä¸º 4 åˆ†é’Ÿ (240 ç§’)
Â  Â  let remainingTime = totalTime;Â 
Â  Â  let quizActive = false;Â 
Â  Â  let nameInput = document.getElementById('studentName');Â 
Â  Â  let wordsInCurrentQuiz = [];Â 

Â  Â  // Function to initialize or reset the quiz
Â  Â  function initQuiz() {
Â  Â  Â  Â  // Clear existing elements
Â  Â  Â  Â  document.getElementById('wordColumn').innerHTML = '';
Â  Â  Â  Â  document.getElementById('definitionColumn').innerHTML = '';
Â  Â  Â  Â  matchedPairs.clear();
Â  Â  Â  Â  selectedWord = null;
Â  Â  Â  Â  wordsInCurrentQuiz = [];Â 
Â  Â  Â  Â  document.getElementById('submitButton').classList.remove('bg-green-500', 'hover:bg-green-600', 'text-white');
Â  Â  Â  Â  document.getElementById('submitButton').classList.add('bg-gray-300', 'text-gray-700');
Â  Â  Â  Â  document.getElementById('submitButton').disabled = true; // Disable submit button initially

Â  Â  Â  Â  // Set current date heading
Â  Â  Â  Â  document.getElementById('dateHeading').textContent = 'Comprehensive1Week 10-11';

Â  Â  Â  Â  // Randomly select 15 words and their definitions
Â  Â  Â  Â  const selectedWordsData = shuffleArray(vocabulary).slice(0, totalWords); // ä½¿ç”¨ totalWords å¸¸é‡
Â  Â  Â  Â  wordsInCurrentQuiz = selectedWordsData;Â 
Â  Â  Â  Â  const correctDefinitionsData = selectedWordsData.map(item => item.definition);

Â  Â  Â  Â  // Randomly select 0 distractor definitions (as per your previous instruction)
Â  Â  Â  Â  const extraDefinitionsData = shuffleArray(vocabulary)
Â  Â  Â  Â  Â  Â  .filter(item => !correctDefinitionsData.includes(item.definition))Â 
Â  Â  Â  Â  Â  Â  .slice(0, 0)
Â  Â  Â  Â  Â  Â  .map(item => item.definition);

Â  Â  Â  Â  // Combine all definitions (15 correct + 0 distractors) and shuffle them
Â  Â  Â  Â  const allDefinitions = shuffleArray([...correctDefinitionsData, ...extraDefinitionsData]);

Â  Â  Â  Â  // Display words in the word column
Â  Â  Â  Â  selectedWordsData.forEach(item => {
Â  Â  Â  Â  Â  Â  const div = document.createElement('div');
Â  Â  Â  Â  Â  Â  div.className = 'word p-3 mb-2 rounded-lg cursor-pointer transition-all duration-200 ease-in-out ' +
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â 'bg-yellow-200 hover:bg-yellow-300 shadow-sm border border-yellow-300';
Â  Â  Â  Â  Â  Â  div.textContent = item.word;
Â  Â  Â  Â  Â  Â  div.dataset.definition = item.definition; // Store correct definition for checking
Â  Â  Â  Â  Â  Â  div.addEventListener('click', handleWordClick);
Â  Â  Â  Â  Â  Â  div.addEventListener('dblclick', handleWordDoubleClick);
Â  Â  Â  Â  Â  Â  document.getElementById('wordColumn').appendChild(div);
Â  Â  Â  Â  });

Â  Â  Â  Â  // Display definitions in the definition column
Â  Â  Â  Â  allDefinitions.forEach(definition => {
Â  Â  Â  Â  Â  Â  const div = document.createElement('div');
Â  Â  Â  Â  Â  Â  div.className = 'definition p-3 mb-2 rounded-lg cursor-pointer transition-all duration-200 ease-in-out ' +
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â 'bg-blue-200 hover:bg-blue-300 shadow-sm border border-blue-300';
Â  Â  Â  Â  Â  Â  div.textContent = definition;
Â  Â  Â  Â  Â  Â  div.addEventListener('click', handleDefinitionClick);
Â  Â  Â  Â  Â  Â  div.addEventListener('dblclick', handleDefinitionDoubleClick); // Double-click handler for definitions
Â  Â  Â  Â  Â  Â  document.getElementById('definitionColumn').appendChild(div);
Â  Â  Â  Â  });

Â  Â  Â  Â  // Start the timer
Â  Â  Â  Â  startTimer();
Â  Â  Â  Â  quizActive = true;
Â  Â  }

Â  Â  // Handles click on a word element
Â  Â  function handleWordClick(e) {
Â  Â  Â  Â  if (!quizActive) return;Â 
Â  Â  Â  Â  const word = e.target;
Â  Â  Â  Â  if (word.classList.contains('bg-pink-300')) return;

Â  Â  Â  Â  if (selectedWord) {
Â  Â  Â  Â  Â  Â  selectedWord.classList.remove('bg-green-400', 'border-green-500');Â 
Â  Â  Â  Â  Â  Â  selectedWord.classList.add('bg-yellow-200', 'border-yellow-300');Â 
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  selectedWord = word;
Â  Â  Â  Â  selectedWord.classList.add('bg-green-400', 'border-green-500');Â 
Â  Â  Â  Â  selectedWord.classList.remove('bg-yellow-200', 'border-yellow-300');Â 
Â  Â  }

Â  Â  // Handles double-click on a word element (for unmatching/deselecting)
Â  Â  function handleWordDoubleClick(e) {
Â  Â  Â  Â  if (!quizActive) return;Â 
Â  Â  Â  Â  e.preventDefault();
Â  Â  Â  Â  const word = e.target;
Â  Â  Â  Â  unmatchElement(word, 'word');
Â  Â  }

Â  Â  // Handles double-click on a definition element (for unmatching)
Â  Â  function handleDefinitionDoubleClick(e) {
Â  Â  Â  Â  if (!quizActive) return;Â 
Â  Â  Â  Â  e.preventDefault();
Â  Â  Â  Â  const definition = e.target;
Â  Â  Â  Â  unmatchElement(definition, 'definition');
Â  Â  }

Â  Â  // Helper function to unmatch an element (word or definition)
Â  Â  function unmatchElement(element, type) {
Â  Â  Â  Â  if (type === 'word' && element.classList.contains('bg-pink-300')) {
Â  Â  Â  Â  Â  Â  const definition = matchedPairs.get(element);
Â  Â  Â  Â  Â  Â  if (definition) {
Â  Â  Â  Â  Â  Â  Â  Â  definition.classList.remove('bg-pink-300', 'border-pink-400', 'cursor-default');
Â  Â  Â  Â  Â  Â  Â  Â  definition.classList.add('bg-blue-200', 'hover:bg-blue-300', 'border-blue-300', 'cursor-pointer');
Â  Â  Â  Â  Â  Â  Â  Â  matchedPairs.delete(element);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  // Restore word style
Â  Â  Â  Â  Â  Â  element.classList.remove('bg-pink-300', 'border-pink-400', 'cursor-default', 'bg-green-400', 'border-green-500');
Â  Â  Â  Â  Â  Â  element.classList.add('bg-yellow-200', 'hover:bg-yellow-300', 'border-yellow-300', 'cursor-pointer');
Â  Â  Â  Â  Â  Â  selectedWord = null; // Clear selected word
Â  Â  Â  Â  } else if (type === 'definition' && element.classList.contains('bg-pink-300')) {
Â  Â  Â  Â  Â  Â  let wordToRemove = null;
Â  Â  Â  Â  Â  Â  for (const [word, definition] of matchedPairs.entries()) {
Â  Â  Â  Â  Â  Â  Â  Â  if (definition === element) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  wordToRemove = word;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  if (wordToRemove) {
Â  Â  Â  Â  Â  Â  Â  Â  // Restore word style
Â  Â  Â  Â  Â  Â  Â  Â  wordToRemove.classList.remove('bg-pink-300', 'border-pink-400', 'cursor-default', 'bg-green-400', 'border-green-500');
Â  Â  Â  Â  Â  Â  Â  Â  wordToRemove.classList.add('bg-yellow-200', 'hover:bg-yellow-300', 'border-yellow-300', 'cursor-pointer');
Â  Â  Â  Â  Â  Â  Â  Â  matchedPairs.delete(wordToRemove);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  // Restore definition style
Â  Â  Â  Â  Â  Â  element.classList.remove('bg-pink-300', 'border-pink-400', 'cursor-default');
Â  Â  Â  Â  Â  Â  element.classList.add('bg-blue-200', 'hover:bg-blue-300', 'border-blue-300', 'cursor-pointer');
Â  Â  Â  Â  Â  Â  selectedWord = null; // Clear selected word
Â  Â  Â  Â  } else if (type === 'word') {
Â  Â  Â  Â  Â  Â  // If not matched, deselect the word (remove green highlight)
Â  Â  Â  Â  Â  Â  element.classList.remove('bg-green-400', 'border-green-500');
Â  Â  Â  Â  Â  Â  element.classList.add('bg-yellow-200', 'border-yellow-300');
Â  Â  Â  Â  Â  Â  selectedWord = null;
Â  Â  Â  Â  }
Â  Â  Â  Â  checkCompletion();Â 
Â  Â  }

Â  Â  // Handles click on a definition element
Â  Â  function handleDefinitionClick(e) {
Â  Â  Â  Â  if (!quizActive) return;Â 
Â  Â  Â  Â  const definition = e.target;
Â  Â  Â  Â  if (definition.classList.contains('bg-pink-300')) return;

Â  Â  Â  Â  if (selectedWord) {
Â  Â  Â  Â  Â  Â  selectedWord.classList.remove('bg-green-400', 'border-green-500');

Â  Â  Â  Â  Â  Â  // Apply 'matched' styling to both word and definition
Â  Â  Â  Â  Â  Â  selectedWord.classList.add('bg-pink-300', 'border-pink-400', 'cursor-default');
Â  Â  Â  Â  Â  Â  definition.classList.add('bg-pink-300', 'border-pink-400', 'cursor-default');
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Remove hover effects for matched items
Â  Â  Â  Â  Â  Â  selectedWord.classList.remove('hover:bg-yellow-300');
Â  Â  Â  Â  Â  Â  definition.classList.remove('hover:bg-blue-300');

Â  Â  Â  Â  Â  Â  // Store the matched pair
Â  Â  Â  Â  Â  Â  matchedPairs.set(selectedWord, definition);
Â  Â  Â  Â  Â  Â  selectedWord = null; // Clear selected word
Â  Â  Â  Â  }
Â  Â  Â  Â  checkCompletion();Â 
Â  Â  }

Â  Â  // Checks if all words have been matched and updates submit button state
Â  Â  function checkCompletion() {
Â  Â  Â  Â  const words = document.querySelectorAll('#wordColumn .word');
Â  Â  Â  Â  const allWordsMatched = Array.from(words).every(word => word.classList.contains('bg-pink-300'));
Â  Â  Â  Â  const submitButton = document.getElementById('submitButton');

Â  Â  Â  Â  if (allWordsMatched && quizActive) {
Â  Â  Â  Â  Â  Â  submitButton.classList.remove('bg-gray-300', 'text-gray-700', 'cursor-not-allowed');
Â  Â  Â  Â  Â  Â  submitButton.classList.add('bg-green-500', 'hover:bg-green-600', 'text-white', 'cursor-pointer');
Â  Â  Â  Â  Â  Â  submitButton.disabled = false;
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  submitButton.classList.add('bg-gray-300', 'text-gray-700', 'cursor-not-allowed');
Â  Â  Â  Â  Â  Â  submitButton.classList.remove('bg-green-500', 'hover:bg-green-600', 'text-white');
Â  Â  Â  Â  Â  Â  submitButton.disabled = true;
Â  Â  Â  Â  }
Â  Â  }

Â  Â  // Handles quiz submission
Â  Â  function submitQuiz() {
Â  Â  Â  Â  if (!quizActive) return;Â 

Â  Â  Â  Â  const studentName = nameInput.value.trim();
Â  Â  Â  Â  if (!studentName) {
Â  Â  Â  Â  Â  Â  showMessage('Missing Information', 'Please enter your name before submitting the quiz.');
Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  }

Â  Â  Â  Â  // Stop the timer
Â  Â  Â  Â  clearInterval(timerInterval);
Â  Â  Â  Â  quizEndTime = new Date();
Â  Â  Â  Â  quizActive = false; // Deactivate quiz
Â  Â  Â  Â  document.getElementById('submitButton').disabled = true; // Also disable button on submission

Â  Â  Â  Â  // Calculate time
Â  Â  Â  Â  let timeDiffSeconds;
Â  Â  Â  Â  if (remainingTime <= 0) {
Â  Â  Â  Â  Â  Â  timeDiffSeconds = totalTime; // Timer ran out
Â  Â  Â  Â  } else if (quizStartTime) {
Â  Â  Â  Â  Â  Â  timeDiffSeconds = Math.floor((quizEndTime - quizStartTime) / 1000);Â 
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  timeDiffSeconds = totalTime - remainingTime;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  const minutes = Math.floor(timeDiffSeconds / 60);
Â  Â  Â  Â  const seconds = Math.floor(timeDiffSeconds % 60);Â 

Â  Â  Â  Â  let correctCount = 0;
Â  Â  Â  Â  let totalWordsInQuiz = 0;Â 
Â  Â  Â  Â  let incorrectAnswersList = "";

Â  Â  Â  Â  document.querySelectorAll('#wordColumn .word').forEach(wordElement => {
Â  Â  Â  Â  Â  Â  totalWordsInQuiz++;
Â  Â  Â  Â  Â  Â  const correctDefinition = wordElement.dataset.definition;
Â  Â  Â  Â  Â  Â  let isCorrect = false;

Â  Â  Â  Â  Â  Â  // Check if this word was matched and if the match is correct
Â  Â  Â  Â  Â  Â  if (matchedPairs.has(wordElement)) {
Â  Â  Â  Â  Â  Â  Â  Â  const matchedDefinitionElement = matchedPairs.get(wordElement);
Â  Â  Â  Â  Â  Â  Â  Â  if (matchedDefinitionElement.textContent === correctDefinition) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  correctCount++;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  isCorrect = true;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }Â 
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // If the answer is INCORRECT (or unmatched), add it to the list of incorrect answers
Â  Â  Â  Â  Â  Â  if (!isCorrect) {
Â  Â  Â  Â  Â  Â  Â  Â  // Find the original word object from the full list (to get word and correct definition)
Â  Â  Â  Â  Â  Â  Â  Â  const wordObj = wordsInCurrentQuiz.find(item => item.word === wordElement.textContent);
Â  Â  Â  Â  Â  Â  Â  Â  if (wordObj) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Format: "Word should be matched with Definition"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  incorrectAnswersList += `${wordObj.word} should be matched with ${wordObj.definition}\n`;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });

Â  Â  Â  Â  // Calculate accuracy
Â  Â  Â  Â  const accuracy = (correctCount / totalWordsInQuiz) * 100;

Â  Â  Â  Â  const pageTitle = document.getElementById('dateHeading').textContent;Â 
Â  Â  Â  Â  const submitTime = quizEndTime.toLocaleTimeString('en-US', { hour12: false, year: 'numeric', month: '2-digit', day: '2-digit', hour: '2-digit', minute: '2-digit', second: '2-digit' }).replace(/, /g, ' ').replace(/\//g, '-');
Â  Â  Â  Â Â 
Â  Â  Â  Â  // Determine the message for incorrect answers section
Â  Â  Â  Â  let incorrectMessage;
Â  Â  Â  Â  if (incorrectAnswersList) {
Â  Â  Â  Â  Â  Â  incorrectMessage = `
---

<h3>Incorrect Matches & Correct Answers (é”™é¢˜ä¸æ­£ç¡®åŒ¹é…):</h3>
${incorrectAnswersList}
Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  incorrectMessage = `
---

<h3>Incorrect Matches: ğŸ¥³ All correct! (é”™é¢˜: ğŸ¥³ å…¨éƒ¨æ­£ç¡®!)</h3>
Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  }

Â  Â  Â  Â  // Construct the result message for the modal
Â  Â  Â  Â  let resultMessage = `
Page Title: ${pageTitle}
Submission Time: ${submitTime}
Student Name: ${studentName}
Completion Time: ${timeDiffSeconds}s (${minutes}m ${seconds}s)
Correct Matches: ${correctCount}/${totalWordsInQuiz}
Accuracy: ${accuracy.toFixed(2)}%
${incorrectMessage}
Â  Â  Â  Â  `;

Â  Â  Â  Â  showMessage('Quiz Results (æµ‹éªŒç»“æœ)', resultMessage);
Â  Â  }Â 

Â  Â  // Starts the countdown timer
Â  Â  function startTimer() {
Â  Â  Â  Â  clearInterval(timerInterval);Â 
Â  Â  Â  Â  remainingTime = totalTime;Â 
Â  Â  Â  Â  updateTimerDisplay();Â 
Â  Â  Â  Â  quizStartTime = new Date();Â 
Â  Â  Â  Â Â 
Â  Â  Â  Â  timerInterval = setInterval(() => {
Â  Â  Â  Â  Â  Â  remainingTime--;
Â  Â  Â  Â  Â  Â  updateTimerDisplay();

Â  Â  Â  Â  Â  Â  if (remainingTime <= 0) {
Â  Â  Â  Â  Â  Â  Â  Â  clearInterval(timerInterval);
Â  Â  Â  Â  Â  Â  Â  Â  showMessage('Time\'s Up!', 'Your time has run out. The quiz has been automatically submitted.');
Â  Â  Â  Â  Â  Â  Â  Â  // Use a slight delay to ensure modal shows before submitQuiz runs
Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(submitQuiz, 100);Â 
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }, 1000);
Â  Â  }

Â  Â  // Updates the timer display
Â  Â  function updateTimerDisplay() {
Â  Â  Â  Â  const minutes = Math.floor(remainingTime / 60);
Â  Â  Â  Â  const seconds = remainingTime % 60;
Â  Â  Â  Â  document.getElementById('timer').textContent = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
Â  Â  }

Â  Â  // Shuffles an array (Fisher-Yates algorithm)
Â  Â  function shuffleArray(array) {
Â  Â  Â  Â  for (let i = array.length - 1; i > 0; i--) {
Â  Â  Â  Â  Â  Â  const j = Math.floor(Math.random() * (i + 1));
Â  Â  Â  Â  Â  Â  [array[i], array[j]] = [array[j], array[i]]; // Swap elements
Â  Â  Â  Â  }
Â  Â  Â  Â  return array;
Â  Â  }

Â  Â  // **MODIFIED: Displays a custom modal message using innerHTML and replacing \n with <br>**
Â  Â  function showMessage(title, message) {
Â  Â  Â  Â  document.getElementById('modalTitle').textContent = title;
Â  Â  Â  Â Â 
Â  Â  Â  Â  // Replace \n with <br> and use innerHTML to ensure line breaks are displayed correctly
Â  Â  Â  Â  // I also replace '---' with an actual <hr> for visual separation.
